\hypertarget{shared_8h}{}\section{C\+:/\+Users/\+Benjaminp/\+Documents/pcc/current/\+E\+L 450/\+Patience\+Inc/firmware/include/shared.h File Reference}
\label{shared_8h}\index{C\+:/\+Users/\+Benjaminp/\+Documents/pcc/current/\+E\+L 450/\+Patience\+Inc/firmware/include/shared.\+h@{C\+:/\+Users/\+Benjaminp/\+Documents/pcc/current/\+E\+L 450/\+Patience\+Inc/firmware/include/shared.\+h}}
{\ttfamily \#include $<$xc.\+h$>$}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structi2c_packet}{i2c\+Packet}
\begin{DoxyCompactList}\small\item\em The first status byte -\/ Includes the two state machine states, the rtc initialization state, and whether or not the loop will sleep at the end. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{shared_8h_a19efa2f81d63ff13a7e60e352b9eb929}{V\+E\+R\+S\+I\+O\+N1}~0
\item 
\#define \hyperlink{shared_8h_a30448eb6a744ed516cfd498fc188a14c}{V\+E\+R\+S\+I\+O\+N2}~0
\item 
\#define \hyperlink{shared_8h_a66d6a95c2ba69f100898e9a415dfea64}{C\+O\+M\+P\+A\+N\+Y}~\char`\"{}Patience, Inc.\char`\"{}
\item 
\#define \hyperlink{shared_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{true}~1
\item 
\#define \hyperlink{shared_8h_a65e9886d74aaee76545e83dd09011727}{false}~0
\item 
\#define \hyperlink{shared_8h_a024148e99a7143db044a48216664d03d}{\+\_\+\+X\+T\+A\+L\+\_\+\+F\+R\+E\+Q}~48000000
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{shared_8h_a3c5d2bf67a701f0cb6556568addb2266}{adc\+\_\+setup} (void)
\item 
unsigned \hyperlink{shared_8h_a30e95e0a08328468776fdbeab55134dc}{adc\+\_\+update} (unsigned char)
\item 
unsigned \hyperlink{shared_8h_ae09373d8ca18beabb0c12aacc5346a54}{adc\+\_\+update2} (unsigned char, unsigned char)
\begin{DoxyCompactList}\small\item\em Updates two A\+D\+C channels to the buffers. \end{DoxyCompactList}\item 
unsigned \hyperlink{shared_8h_a7f51ab913559b76964a9efdd05c13d8f}{adc\+\_\+update\+All} ()
\begin{DoxyCompactList}\small\item\em Update all the A\+D\+C buffers that are activated in {\ttfamily \hyperlink{shared_8c_af5e0a217880b6f6976ff1c2b1297f7a3}{adc\+\_\+setup()}}. \end{DoxyCompactList}\item 
void \hyperlink{shared_8h_a2d1c3e7be837352ae08245dc9396e7e1}{pwm\+\_\+setup} (void)
\begin{DoxyCompactList}\small\item\em Setup T\+M\+R2 for use by all the C\+C\+P modules. \end{DoxyCompactList}\item 
unsigned \hyperlink{shared_8h_a21be142dc679d03a74eb750444353c27}{pwm\+\_\+set} (unsigned char, unsigned char)
\begin{DoxyCompactList}\small\item\em Sets a specific pwm channel to a certain duty cycle in \%. \end{DoxyCompactList}\item 
void \hyperlink{shared_8h_a6cf2b6b416b8fe80e2c25b106b96ba43}{i2c\+\_\+setup} (void)
\begin{DoxyCompactList}\small\item\em Sets up the i2c1 module. \end{DoxyCompactList}\item 
unsigned \hyperlink{shared_8h_a9f4df16ab76f9490d7bfe6e3d224bb5d}{i2c\+\_\+tx} (\hyperlink{structi2c_packet}{i2c\+Packet})
\begin{DoxyCompactList}\small\item\em Takes a packet and transmits it according to its contents. Returns true if successful. \end{DoxyCompactList}\item 
unsigned char $\ast$ \hyperlink{shared_8h_a918d282046fdbfa4e4d6320d84af20b6}{i2c\+\_\+rx} (unsigned char, unsigned char)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\begin{tabbing}
xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=\kill
struct \{\\
\>unsigned \hyperlink{shared_8h_a11fd95187603059b4e22f79d5826d9ca}{rtcInit}: 1\\
\>unsigned \hyperlink{shared_8h_ade5c47f4639380ed520dd5d0032d8a0e}{mmode}: 2\\
\>unsigned \hyperlink{shared_8h_a2ae520db1099ff9c7da192764d4e4790}{state}: 2\\
\>unsigned \hyperlink{shared_8h_a5505527fe3012eba92853066bfdf1217}{sleepable}: 1\\
\>unsigned \hyperlink{shared_8h_adf71f3d8410c1f1dbbc96680a92c49af}{\_\_pad0\_\_}: 2\\
\} \hyperlink{shared_8h_a10815683d06f94a35baf0a3181bdf6df}{status}\\

\end{tabbing}\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\hypertarget{shared_8h_a024148e99a7143db044a48216664d03d}{}\index{shared.\+h@{shared.\+h}!\+\_\+\+X\+T\+A\+L\+\_\+\+F\+R\+E\+Q@{\+\_\+\+X\+T\+A\+L\+\_\+\+F\+R\+E\+Q}}
\index{\+\_\+\+X\+T\+A\+L\+\_\+\+F\+R\+E\+Q@{\+\_\+\+X\+T\+A\+L\+\_\+\+F\+R\+E\+Q}!shared.\+h@{shared.\+h}}
\subsubsection[{\+\_\+\+X\+T\+A\+L\+\_\+\+F\+R\+E\+Q}]{\setlength{\rightskip}{0pt plus 5cm}\#define \+\_\+\+X\+T\+A\+L\+\_\+\+F\+R\+E\+Q~48000000}\label{shared_8h_a024148e99a7143db044a48216664d03d}
\hypertarget{shared_8h_a66d6a95c2ba69f100898e9a415dfea64}{}\index{shared.\+h@{shared.\+h}!C\+O\+M\+P\+A\+N\+Y@{C\+O\+M\+P\+A\+N\+Y}}
\index{C\+O\+M\+P\+A\+N\+Y@{C\+O\+M\+P\+A\+N\+Y}!shared.\+h@{shared.\+h}}
\subsubsection[{C\+O\+M\+P\+A\+N\+Y}]{\setlength{\rightskip}{0pt plus 5cm}\#define C\+O\+M\+P\+A\+N\+Y~\char`\"{}Patience, Inc.\char`\"{}}\label{shared_8h_a66d6a95c2ba69f100898e9a415dfea64}
\hypertarget{shared_8h_a65e9886d74aaee76545e83dd09011727}{}\index{shared.\+h@{shared.\+h}!false@{false}}
\index{false@{false}!shared.\+h@{shared.\+h}}
\subsubsection[{false}]{\setlength{\rightskip}{0pt plus 5cm}\#define false~0}\label{shared_8h_a65e9886d74aaee76545e83dd09011727}
\hypertarget{shared_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}{}\index{shared.\+h@{shared.\+h}!true@{true}}
\index{true@{true}!shared.\+h@{shared.\+h}}
\subsubsection[{true}]{\setlength{\rightskip}{0pt plus 5cm}\#define true~1}\label{shared_8h_a41f9c5fb8b08eb5dc3edce4dcb37fee7}
\hypertarget{shared_8h_a19efa2f81d63ff13a7e60e352b9eb929}{}\index{shared.\+h@{shared.\+h}!V\+E\+R\+S\+I\+O\+N1@{V\+E\+R\+S\+I\+O\+N1}}
\index{V\+E\+R\+S\+I\+O\+N1@{V\+E\+R\+S\+I\+O\+N1}!shared.\+h@{shared.\+h}}
\subsubsection[{V\+E\+R\+S\+I\+O\+N1}]{\setlength{\rightskip}{0pt plus 5cm}\#define V\+E\+R\+S\+I\+O\+N1~0}\label{shared_8h_a19efa2f81d63ff13a7e60e352b9eb929}
\hypertarget{shared_8h_a30448eb6a744ed516cfd498fc188a14c}{}\index{shared.\+h@{shared.\+h}!V\+E\+R\+S\+I\+O\+N2@{V\+E\+R\+S\+I\+O\+N2}}
\index{V\+E\+R\+S\+I\+O\+N2@{V\+E\+R\+S\+I\+O\+N2}!shared.\+h@{shared.\+h}}
\subsubsection[{V\+E\+R\+S\+I\+O\+N2}]{\setlength{\rightskip}{0pt plus 5cm}\#define V\+E\+R\+S\+I\+O\+N2~0}\label{shared_8h_a30448eb6a744ed516cfd498fc188a14c}


\subsection{Function Documentation}
\hypertarget{shared_8h_a3c5d2bf67a701f0cb6556568addb2266}{}\index{shared.\+h@{shared.\+h}!adc\+\_\+setup@{adc\+\_\+setup}}
\index{adc\+\_\+setup@{adc\+\_\+setup}!shared.\+h@{shared.\+h}}
\subsubsection[{adc\+\_\+setup}]{\setlength{\rightskip}{0pt plus 5cm}void adc\+\_\+setup (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{shared_8h_a3c5d2bf67a701f0cb6556568addb2266}
\hypertarget{shared_8h_a30e95e0a08328468776fdbeab55134dc}{}\index{shared.\+h@{shared.\+h}!adc\+\_\+update@{adc\+\_\+update}}
\index{adc\+\_\+update@{adc\+\_\+update}!shared.\+h@{shared.\+h}}
\subsubsection[{adc\+\_\+update}]{\setlength{\rightskip}{0pt plus 5cm}unsigned adc\+\_\+update (
\begin{DoxyParamCaption}
\item[{unsigned}]{char}
\end{DoxyParamCaption}
)}\label{shared_8h_a30e95e0a08328468776fdbeab55134dc}
\hypertarget{shared_8h_ae09373d8ca18beabb0c12aacc5346a54}{}\index{shared.\+h@{shared.\+h}!adc\+\_\+update2@{adc\+\_\+update2}}
\index{adc\+\_\+update2@{adc\+\_\+update2}!shared.\+h@{shared.\+h}}
\subsubsection[{adc\+\_\+update2}]{\setlength{\rightskip}{0pt plus 5cm}unsigned adc\+\_\+update2 (
\begin{DoxyParamCaption}
\item[{unsigned char}]{ch\+A, }
\item[{unsigned char}]{ch\+B}
\end{DoxyParamCaption}
)}\label{shared_8h_ae09373d8ca18beabb0c12aacc5346a54}


Updates two A\+D\+C channels to the buffers. 

Inputs\+: two unsigned chars, {\ttfamily ch\+A} and {\ttfamily ch\+B}, specify which A\+D\+C channel to update.

Outputs\+: A single bit specifying success. (1=success) \hypertarget{shared_8h_a7f51ab913559b76964a9efdd05c13d8f}{}\index{shared.\+h@{shared.\+h}!adc\+\_\+update\+All@{adc\+\_\+update\+All}}
\index{adc\+\_\+update\+All@{adc\+\_\+update\+All}!shared.\+h@{shared.\+h}}
\subsubsection[{adc\+\_\+update\+All}]{\setlength{\rightskip}{0pt plus 5cm}unsigned adc\+\_\+update\+All (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{shared_8h_a7f51ab913559b76964a9efdd05c13d8f}


Update all the A\+D\+C buffers that are activated in {\ttfamily \hyperlink{shared_8c_af5e0a217880b6f6976ff1c2b1297f7a3}{adc\+\_\+setup()}}. 

\hypertarget{shared_8h_a918d282046fdbfa4e4d6320d84af20b6}{}\index{shared.\+h@{shared.\+h}!i2c\+\_\+rx@{i2c\+\_\+rx}}
\index{i2c\+\_\+rx@{i2c\+\_\+rx}!shared.\+h@{shared.\+h}}
\subsubsection[{i2c\+\_\+rx}]{\setlength{\rightskip}{0pt plus 5cm}unsigned char$\ast$ i2c\+\_\+rx (
\begin{DoxyParamCaption}
\item[{unsigned}]{char, }
\item[{unsigned}]{char}
\end{DoxyParamCaption}
)}\label{shared_8h_a918d282046fdbfa4e4d6320d84af20b6}
\hypertarget{shared_8h_a6cf2b6b416b8fe80e2c25b106b96ba43}{}\index{shared.\+h@{shared.\+h}!i2c\+\_\+setup@{i2c\+\_\+setup}}
\index{i2c\+\_\+setup@{i2c\+\_\+setup}!shared.\+h@{shared.\+h}}
\subsubsection[{i2c\+\_\+setup}]{\setlength{\rightskip}{0pt plus 5cm}void i2c\+\_\+setup (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{shared_8h_a6cf2b6b416b8fe80e2c25b106b96ba43}


Sets up the i2c1 module. 

\hypertarget{shared_8h_a9f4df16ab76f9490d7bfe6e3d224bb5d}{}\index{shared.\+h@{shared.\+h}!i2c\+\_\+tx@{i2c\+\_\+tx}}
\index{i2c\+\_\+tx@{i2c\+\_\+tx}!shared.\+h@{shared.\+h}}
\subsubsection[{i2c\+\_\+tx}]{\setlength{\rightskip}{0pt plus 5cm}unsigned i2c\+\_\+tx (
\begin{DoxyParamCaption}
\item[{{\bf i2c\+Packet}}]{packet}
\end{DoxyParamCaption}
)}\label{shared_8h_a9f4df16ab76f9490d7bfe6e3d224bb5d}


Takes a packet and transmits it according to its contents. Returns true if successful. 

Inputs\+: a i2c transmission packet (consists of address and array of data)

Outputs\+: a single bit specifying failure or success

Description\+: This function takes the packet and transmits the {\ttfamily packet.\+addr} byte first. It then transmits {\ttfamily packet.\+data\+Length} bytes from the {\ttfamily packet.\+data} array. If at any time a byte is not acknowleged, the function will return 0 (false). \hypertarget{shared_8h_a21be142dc679d03a74eb750444353c27}{}\index{shared.\+h@{shared.\+h}!pwm\+\_\+set@{pwm\+\_\+set}}
\index{pwm\+\_\+set@{pwm\+\_\+set}!shared.\+h@{shared.\+h}}
\subsubsection[{pwm\+\_\+set}]{\setlength{\rightskip}{0pt plus 5cm}unsigned pwm\+\_\+set (
\begin{DoxyParamCaption}
\item[{unsigned char}]{channel, }
\item[{unsigned char}]{duty}
\end{DoxyParamCaption}
)}\label{shared_8h_a21be142dc679d03a74eb750444353c27}


Sets a specific pwm channel to a certain duty cycle in \%. 

Inputs\+: Channel -\/ which P\+W\+M channel to use, duty -\/ the duty cycle in percent.

Outputs\+: A single bit specifying whether or not the command succeded (1 = success) \hypertarget{shared_8h_a2d1c3e7be837352ae08245dc9396e7e1}{}\index{shared.\+h@{shared.\+h}!pwm\+\_\+setup@{pwm\+\_\+setup}}
\index{pwm\+\_\+setup@{pwm\+\_\+setup}!shared.\+h@{shared.\+h}}
\subsubsection[{pwm\+\_\+setup}]{\setlength{\rightskip}{0pt plus 5cm}void pwm\+\_\+setup (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\label{shared_8h_a2d1c3e7be837352ae08245dc9396e7e1}


Setup T\+M\+R2 for use by all the C\+C\+P modules. 



\subsection{Variable Documentation}
\hypertarget{shared_8h_adf71f3d8410c1f1dbbc96680a92c49af}{}\index{shared.\+h@{shared.\+h}!\+\_\+\+\_\+pad0\+\_\+\+\_\+@{\+\_\+\+\_\+pad0\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+pad0\+\_\+\+\_\+@{\+\_\+\+\_\+pad0\+\_\+\+\_\+}!shared.\+h@{shared.\+h}}
\subsubsection[{\+\_\+\+\_\+pad0\+\_\+\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}unsigned \+\_\+\+\_\+pad0\+\_\+\+\_\+}\label{shared_8h_adf71f3d8410c1f1dbbc96680a92c49af}
\hypertarget{shared_8h_ade5c47f4639380ed520dd5d0032d8a0e}{}\index{shared.\+h@{shared.\+h}!mmode@{mmode}}
\index{mmode@{mmode}!shared.\+h@{shared.\+h}}
\subsubsection[{mmode}]{\setlength{\rightskip}{0pt plus 5cm}unsigned mmode}\label{shared_8h_ade5c47f4639380ed520dd5d0032d8a0e}
\hypertarget{shared_8h_a11fd95187603059b4e22f79d5826d9ca}{}\index{shared.\+h@{shared.\+h}!rtc\+Init@{rtc\+Init}}
\index{rtc\+Init@{rtc\+Init}!shared.\+h@{shared.\+h}}
\subsubsection[{rtc\+Init}]{\setlength{\rightskip}{0pt plus 5cm}unsigned rtc\+Init}\label{shared_8h_a11fd95187603059b4e22f79d5826d9ca}
\hypertarget{shared_8h_a5505527fe3012eba92853066bfdf1217}{}\index{shared.\+h@{shared.\+h}!sleepable@{sleepable}}
\index{sleepable@{sleepable}!shared.\+h@{shared.\+h}}
\subsubsection[{sleepable}]{\setlength{\rightskip}{0pt plus 5cm}unsigned sleepable}\label{shared_8h_a5505527fe3012eba92853066bfdf1217}
\hypertarget{shared_8h_a2ae520db1099ff9c7da192764d4e4790}{}\index{shared.\+h@{shared.\+h}!state@{state}}
\index{state@{state}!shared.\+h@{shared.\+h}}
\subsubsection[{state}]{\setlength{\rightskip}{0pt plus 5cm}unsigned state}\label{shared_8h_a2ae520db1099ff9c7da192764d4e4790}
\hypertarget{shared_8h_a10815683d06f94a35baf0a3181bdf6df}{}\index{shared.\+h@{shared.\+h}!status@{status}}
\index{status@{status}!shared.\+h@{shared.\+h}}
\subsubsection[{status}]{\setlength{\rightskip}{0pt plus 5cm}struct \{ ... \}  status}\label{shared_8h_a10815683d06f94a35baf0a3181bdf6df}
